---
import Layout from '../layouts/Layout.astro';
import { Image } from 'astro:assets';
import heroImage from '../assets/hero-picture.jpeg';
---

<Layout 
  title="Durham AI Safety Initiative"
  description="Durham AI Safety Initiative (DAISI) at Durham University: events, research, seminars and community focused on reducing catastrophic risks from advanced AI."
    heroImage={heroImage.src}
>
  <script
    type="application/ld+json"
    slot="head"
    set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Durham AI Safety Initiative",
      "alternateName": "DAISI",
      "url": "https://durhamaisafety.com",
      "description": "Student-led initiative at Durham University focused on reducing catastrophic risks from advanced AI through education, research, and community building.",
      "foundingLocation": {
        "@type": "Place",
        "name": "Durham University",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Durham",
          "addressCountry": "UK"
        }
      },
      "areaServed": "Durham University",
      "memberOf": {
        "@type": "EducationalOrganization",
        "name": "Durham University"
      }
    })}
  />
    <!-- Hero Section -->
    <section id="home" class="min-h-100dvh min-h-100svh min-h-100vh flex items-center justify-center relative overflow-hidden pt-28 md:pt-32">
        <!-- Hero Image -->
        <Image
            src={heroImage}
            alt="Durham Cathedral"
            class="absolute inset-0 w-full h-full object-cover"
            widths={[640, 768, 1024, 1280, 1536, 1920]}
            sizes="100vw"
            loading="eager"
            decoding="async"
        />
        <div class="absolute inset-0 bg-gradient-to-br from-black/60 via-black/50 to-black/40"></div>
    <div class="site-container mx-auto px-6 text-center relative z-10">
            <div class="max-w-6xl mx-auto space-y-6 md:space-y-8">
                <h1 class="text-3xl md:text-4xl lg:text-6xl font-bold leading-relaxed" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.8), 0 0 10px rgba(0,0,0,0.6);">
                    <span class="text-white">Durham students and academics for </span><span class="text-bright-purple italic font-medium">reducing catastrophic risks from advanced AI</span>
                </h1>
                
                <p class="text-xl md:text-2xl lg:text-3xl max-w-3xl mx-auto leading-relaxed mb-6 md:mb-8" style="text-shadow: 1px 1px 3px rgba(0,0,0,0.8), 0 0 8px rgba(0,0,0,0.5);">
                    <span class="font-semibold text-light-purple">Whatever your expertise,</span> 
                    <span class="text-white">you can contribute to the conversation and make a difference.</span>
                </p>
                
                <div class="pt-2 md:pt-4">
                    <a href="/get-involved/"
                       class="inline-block px-12 py-4 bg-deep-purple text-white font-bold text-lg rounded-full transition-colors duration-300 pulse-glow">
                        Get Involved
                    </a>
                </div>
                
                <!-- Scroll down prompt -->
                <div class="mt-12 md:mt-16">
                    <button type="button" id="scroll-to-events" aria-label="Scroll to Events section"
                            class="text-center cursor-pointer transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-bright-purple/70 focus:ring-offset-2 focus:ring-offset-transparent rounded-lg">
                        <span class="block text-white text-2xl" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);" aria-hidden="true">
                            <i class="fa-solid fa-chevron-down" aria-hidden="true"></i>
                        </span>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Events Section -->
    <section id="events" class="py-16 section-neutral">
    <div class="site-container mx-auto px-6 relative z-10">
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-5xl font-bold mb-6">Our Events</h2>
                <div class="w-24 h-1 bg-gradient-to-r from-bright-purple to-light-purple mx-auto rounded-full"></div>
            </div>
            
            <div id="calendar" class="max-w-5xl mx-auto mb-16">
                <p class="text-center text-lg mb-8 font-medium">
                    We'll update this calendar with upcoming events and deadlines. Sync this to yours and watch out for updates!
                </p>
                <div class="bg-white/20 backdrop-blur rounded-2xl p-4 border border-bright-purple/30 calendar-container">
                    <!-- Loading state -->
                    <div id="calendar-loading" class="calendar-loading">
                        <div class="text-center">
                            <div class="spinner mx-auto mb-4"></div>
                            <p class="text-bright-purple font-medium">Loading calendar...</p>
                        </div>
                    </div>
                    
                    <!-- Calendar iframe -->
                    <div class="overflow-hidden rounded-xl">                            
                        <iframe 
                            id="calendar-iframe" 
                            title="Durham AISI Events Calendar"
                            src="https://calendar.google.com/calendar/embed?height=600&wkst=2&ctz=Europe%2FLondon&showPrint=0&title=Durham%20AISI%20Events&showCalendars=0&mode=AGENDA&hl=en_GB&src=ODk2ZWRjZjRmOWNkNDczMDUyMzJiMmM3OGNjMDZkNGQxMzY1YTE4ZGFiYmFjZTc0OWJkZTIzN2NmZDkyYmVhNkBncm91cC5jYWxlbmRhci5nb29nbGUuY29t&color=%238e24aa"
                            class="w-full h-96 md:h-[500px] lg:h-[600px] border-0 calendar-iframe" 
                            style="border-width:0" frameborder="0" scrolling="no" loading="lazy"
                        ></iframe>
                    </div>
                </div>
            </div>
            
            <!-- Program Cards -->
            <div class="max-w-6xl mx-auto mb-16">
                <!-- First row: 2 main cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                    <div class="program-card rounded-2xl p-8">
                        <div class="flex items-center mb-6">
                            <div class="w-16 h-16 bg-deep-purple rounded-xl flex items-center justify-center mr-4">
                                <i class="fa-solid fa-chalkboard-teacher text-2xl text-white" aria-hidden="true"></i>
                            </div>
                            <h4 class="text-2xl font-bold">Intro Seminars</h4>
                        </div>
                        <p class="mb-6 leading-relaxed text-slate-600">
                            Regular sessions exploring core AI safety concepts in an accessible, interactive format.
                        </p>
                        <div class="space-y-2 mb-6">
                            <div class="flex items-center">
                                <i class="fa-solid fa-users text-bright-purple mr-2" aria-hidden="true"></i>
                                <span class="text-sm text-slate-600">No technical background needed</span>
                            </div>
                        </div>
                        <a href="/programs/#intro-seminars" class="inline-block px-6 py-2 bg-deep-purple text-white font-medium text-sm rounded-lg transition-colors duration-300">
                            Learn More
                        </a>
                    </div>
                
                    <div class="program-card rounded-2xl p-8">
                        <div class="flex items-center mb-6">
                            <div class="w-16 h-16 bg-deep-purple rounded-xl flex items-center justify-center mr-4">
                                <i class="fa-solid fa-book-open text-2xl text-white" aria-hidden="true"></i>
                            </div>
                            <h4 class="text-2xl font-bold">In-Depth Reading Groups</h4>
                        </div>
                        <p class="mb-6 leading-relaxed text-slate-600">
                            Deeper discussion on AI safety papers with PhD students specialising in the areas. 
                            Open to anyone - aimed at those wanting to get into the nitty-gritty technical details of alignment or policy.
                        </p>
                        <div class="space-y-2 mb-6">
                            <div class="flex items-center">
                                <i class="fa-solid fa-laptop-code text-bright-purple mr-2" aria-hidden="true"></i>
                                <span class="text-sm text-slate-600">Some prior knowledge useful</span>
                            </div>
                        </div>
                        <a href="/programs/#reading-groups" class="inline-block px-6 py-2 bg-deep-purple text-white font-medium text-sm rounded-lg transition-colors duration-300">
                            Learn More
                        </a>
                    </div>
                </div>
                
                <!-- Second row: 3 cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="program-card rounded-2xl p-8">
                        <div class="flex items-center mb-6">
                            <div class="w-16 h-16 bg-deep-purple rounded-xl flex items-center justify-center mr-4">
                                <i class="fa-solid fa-microscope text-2xl text-white" aria-hidden="true"></i>
                            </div>
                            <h4 class="text-2xl font-bold">Research Project Support</h4>
                        </div>
                        <p class="mb-6 leading-relaxed text-slate-600">
                            We support you to pursue AI safety research. 
                            We can support applications for fellowships and funding,
                            and advise students on dissertation and independent study projects.
                        </p>
                        <div class="space-y-2 mb-6">
                            <div class="flex items-center">
                                <i class="fa-solid fa-graduation-cap text-bright-purple mr-2" aria-hidden="true"></i>
                                <span class="text-sm text-slate-600">Faculty & Students</span>
                            </div>
                        </div>
                        <a href="/programs/#research-projects" class="inline-block px-6 py-2 bg-deep-purple text-white font-medium text-sm rounded-lg transition-colors duration-300">
                            Learn More
                        </a>
                    </div>
                    
                    <div class="program-card rounded-2xl p-8">
                        <div class="flex items-center mb-6">
                            <div class="w-16 h-16 bg-deep-purple rounded-xl flex items-center justify-center mr-4">
                                <i class="fa-solid fa-microphone text-2xl text-white" aria-hidden="true"></i>
                            </div>
                            <h4 class="text-2xl font-bold">Speaker Events</h4>
                        </div>
                        <p class="mb-6 leading-relaxed text-slate-600">
                           Insightful talks by leading researchers and industry professionals who share their insights on AI safety and showcase their latest research.
                        </p>
                        <a href="/programs/#speaker-series" class="inline-block px-6 py-2 bg-deep-purple text-white font-medium text-sm rounded-lg transition-colors duration-300">
                            Learn More
                        </a>
                    </div>
                    
                    <div class="program-card rounded-2xl p-8">
                        <div class="flex items-center mb-6">
                            <div class="w-16 h-16 bg-deep-purple rounded-xl flex items-center justify-center mr-4">
                                <i class="fa-solid fa-users text-2xl text-white" aria-hidden="true"></i>
                            </div>
                            <h4 class="text-2xl font-bold">Social Events</h4>
                        </div>
                        <p class="mb-6 leading-relaxed text-slate-600">
                            Relaxed socials to connect and build community.
                        </p>
                        <div class="space-y-2 mb-6">
                            <div class="flex items-center">
                                <i class="fa-solid fa-heart text-bright-purple mr-2" aria-hidden="true"></i>
                                <span class="text-sm text-slate-600">Everyone welcome</span>
                            </div>
                        </div>
                        <a href="/programs/#socials" class="inline-block px-6 py-2 bg-deep-purple text-white font-medium text-sm rounded-lg transition-colors duration-300">
                            Learn More
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>
</Layout>

<script>
    // Scroll to events section
    document.getElementById('scroll-to-events')?.addEventListener('click', () => {
        const eventsSection = document.getElementById('events');
        const header = document.querySelector('header');
        const headerHeight = header ? header.offsetHeight : 0;
        if (eventsSection) {
            const targetPosition = eventsSection.getBoundingClientRect().top + window.scrollY - headerHeight - 20;
            const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            window.scrollTo({
                top: targetPosition,
                behavior: prefersReduced ? 'auto' : 'smooth'
            });
        }
    });
    
    // Calendar loading state
    const calendarIframe = document.getElementById('calendar-iframe');
    const calendarLoading = document.getElementById('calendar-loading');
    
    // Hide loading state when calendar is loaded
    if (calendarIframe && calendarLoading) {
        calendarIframe.addEventListener('load', () => {
            calendarLoading.style.display = 'none';
            calendarIframe.classList.add('loaded');
        });
    }
    
    // Fallback to hide loading state after 5 seconds if load event doesn't fire
    setTimeout(() => {
        if (calendarIframe && calendarLoading && !calendarIframe.classList.contains('loaded')) {
            calendarLoading.style.display = 'none';
            calendarIframe.classList.add('loaded');
        }
    }, 5000);
</script>

<style>
/* Calendar loading styles */
.calendar-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 400px;
}

.calendar-iframe {
    opacity: 0;
    transition: opacity 0.3s ease;
}

.calendar-iframe.loaded {
    opacity: 1;
}

/* Spinner animation */
.spinner {
    width: 40px;
    height: 40px;
    border: 4px solid rgba(235, 128, 253, 0.2);
    border-top-color: var(--color-bright-purple);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.calendar-container {
    position: relative;
}
</style>

